---
import '../styles/global.css';

interface Props {
  title: string;
  activePage: 'dashboard' | 'pacientes' | 'accesibilidad' | 'prueba';
}

const { title, activePage } = Astro.props;
---

<!DOCTYPE html>
<html lang="es" class="transition-colors duration-300">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title} - Left Joiners</title>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link href="https://fonts.cdnfonts.com/css/opendyslexic" rel="stylesheet" />
  <script is:inline>
    (function() {
      const theme = localStorage.getItem('theme') || 'light';
      if (theme === 'dark') {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
      
      // Aplicar fuente OpenDyslexic si está activada
      const useDyslexicFont = localStorage.getItem('dyslexic-font') === 'true';
      if (useDyslexicFont) {
        document.documentElement.classList.add('dyslexic-font');
      }
    })();
  </script>
  <style>
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      font-size: 24px !important;
    }
    
    /* Aplicar OpenDyslexic cuando esté activado - texto general más pequeño */
    html.dyslexic-font body,
    html.dyslexic-font p,
    html.dyslexic-font span:not(.material-symbols-outlined),
    html.dyslexic-font div:not(:has(.material-symbols-outlined)),
    html.dyslexic-font input,
    html.dyslexic-font textarea,
    html.dyslexic-font select,
    html.dyslexic-font label,
    html.dyslexic-font li,
    html.dyslexic-font td,
    html.dyslexic-font th {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 90% !important;
      line-height: 1.6 !important;
    }
    
    /* Títulos con OpenDyslexic */
    html.dyslexic-font h1 {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 100% !important;
      line-height: 1.6 !important;
    }
    
    html.dyslexic-font h2 {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 100% !important;
      line-height: 1.6 !important;
    }
    
    html.dyslexic-font h3,
    html.dyslexic-font h4,
    html.dyslexic-font h5,
    html.dyslexic-font h6 {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 92% !important;
      line-height: 1.6 !important;
    }
    
    /* Título "Left Joiners" en sidebar */
    html.dyslexic-font .sidebar-title {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 125% !important;
      line-height: 1.4 !important;
    }
    
    /* Título "Left Joiners" en header móvil */
    html.dyslexic-font .header-title {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 125% !important;
      line-height: 1.4 !important;
    }
    
    /* Título de la página en header desktop (ej: "Configuración de Accesibilidad") */
    html.dyslexic-font .page-title {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 140% !important;
      line-height: 1.4 !important;
    }
    
    /* Menús de navegación MÁS GRANDES */
    html.dyslexic-font nav a,
    html.dyslexic-font nav p,
    html.dyslexic-font aside a,
    html.dyslexic-font aside p,
    html.dyslexic-font header a,
    html.dyslexic-font header button {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 105% !important;
      line-height: 1.6 !important;
    }
    
    /* Enlaces y botones en general */
    html.dyslexic-font a,
    html.dyslexic-font button {
      font-family: 'OpenDyslexic', Arial, sans-serif !important;
      font-size: 90% !important;
    }
    
    /* NO aplicar a iconos Material Symbols - NUNCA cambiar tamaño ni fuente */
    html.dyslexic-font .material-symbols-outlined,
    .material-symbols-outlined {
      font-family: 'Material Symbols Outlined' !important;
      font-size: 24px !important;
      line-height: 1 !important;
    }
    
    /* Iconos grandes específicos mantienen su tamaño */
    html.dyslexic-font .material-symbols-outlined[style*="font-size: 32px"],
    .material-symbols-outlined[style*="font-size: 32px"] {
      font-size: 32px !important;
    }
    
    /* NO aplicar a código */
    html.dyslexic-font code,
    html.dyslexic-font pre {
      font-family: monospace !important;
      font-size: inherit !important;
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-[#1F2937] dark:text-gray-200">
  <div class="relative flex min-h-screen w-full">
    
    {/* SIDEBAR - Visible en pantallas grandes (a la IZQUIERDA) */}
    <aside class="hidden xl:flex xl:flex-col xl:w-64 xl:min-w-64 xl:max-w-64 xl:border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-[#1F2937]">
      {/* Header del Sidebar - Misma altura que el header superior */}
      <div class="flex items-center px-6 border-b border-gray-200 dark:border-gray-700 h-[73px]">
        <div class="flex items-center gap-3">
          <div class="text-primary">
            <span class="material-symbols-outlined" style="font-size: 32px;">health_and_safety</span>
          </div>
          <div class="flex flex-col">
            <h1 class="text-lg font-bold sidebar-title">Left Joiners</h1>
            <p class="text-xs text-gray-500 dark:text-gray-400">Portal de Datos Médicos</p>
          </div>
        </div>
      </div>

      {/* Navegación Vertical */}
      <nav class="flex flex-col gap-2 px-4 py-6">
        <a 
          class={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
            activePage === 'dashboard' 
              ? 'bg-primary/20 text-primary dark:bg-primary/30' 
              : 'hover:bg-gray-100 dark:hover:bg-gray-700'
          }`}
          href="/"
        >
          <span class="material-symbols-outlined">dashboard</span>
          <p class="text-sm font-medium">Dashboard</p>
        </a>
        <a 
          class={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
            activePage === 'pacientes' 
              ? 'bg-primary/20 text-primary dark:bg-primary/30' 
              : 'hover:bg-gray-100 dark:hover:bg-gray-700'
          }`}
          href="/pacientes"
        >
          <span class="material-symbols-outlined">group</span>
          <p class="text-sm font-medium">Pacientes</p>
        </a>
        <a 
          class={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
            activePage === 'accesibilidad' 
              ? 'bg-primary/20 text-primary dark:bg-primary/30' 
              : 'hover:bg-gray-100 dark:hover:bg-gray-700'
          }`}
          href="/accesibilidad"
        >
          <span class="material-symbols-outlined">accessibility_new</span>
          <p class="text-sm font-medium">Accesibilidad</p>
        </a>
        <a 
          class={`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${
            activePage === 'prueba' 
              ? 'bg-primary/20 text-primary dark:bg-primary/30' 
              : 'hover:bg-gray-100 dark:hover:bg-gray-700'
          }`}
          href="/ejemplo-pacientes"
        >
          <span class="material-symbols-outlined">science</span>
          <p class="text-sm font-medium">Prueba</p>
        </a>
      </nav>
	  
      {/* User Info - Footer del Sidebar */}
      <div class="mt-auto px-4 py-4 border-t border-gray-200 dark:border-gray-700">
        <div class="flex items-center gap-3">
          <div 
            class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10" 
            style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAymE-SWFEfdRehjLRi2yiBNuqzT1G2cqM7Eb9ram0Rus2dlG0tNNW3aPbRMkFIeK315X_ixw_MDf_PNjqlKIYMqk3lKpJCO3_Jo2Hjf8zK63nbts0rAPvYB8SHucjKAghQFPbgPkK4yTxm_2jZA3HhcK5QDDx9ah7L9RZgJqbhpQQVBkMYCpUpNvfSDu40yPVFWK2oXHwwweU_s6dbUfINJ8vPDtYGGa0rKgjhA69A7m7oIoYCLSpmWOk1wYu8q_pBSfVVH80gNIo');"
          ></div>
          <div class="flex flex-col flex-1 min-w-0">
            <p class="text-sm font-medium truncate">Usuario</p>
            <p class="text-xs text-gray-500 dark:text-gray-400 truncate">usuario@ejemplo.com</p>
          </div>
        </div>
		
      </div>
    </aside>

    {/* CONTENIDO PRINCIPAL */}
    <div class="flex flex-col flex-1">
      
      {/* HEADER SUPERIOR - Visible SIEMPRE (en todas las resoluciones) */}
      <header class="flex items-center justify-between px-4 sm:px-8 py-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-[#1F2937]">
        {/* Logo y título - Solo visible en móvil/tablet */}
        <div class="flex items-center gap-3 xl:hidden">
          <div class="text-primary">
            <span class="material-symbols-outlined" style="font-size: 32px;">health_and_safety</span>
          </div>
          <div class="flex flex-col">
            <h1 class="text-base sm:text-lg font-bold header-title">Left Joiners</h1>
            <p class="text-xs sm:text-sm text-gray-500 dark:text-gray-400">Portal de Datos Médicos</p>
          </div>
        </div>

        {/* Título de la página - Solo visible en desktop cuando hay sidebar */}
        <div class="hidden xl:block xl:flex-1 xl:max-w-lg xl:mr-4">
          <h2 class="text-xl font-bold page-title truncate">{title}</h2>
        </div>

        {/* Acciones del header */}
        <div class="flex items-center gap-2 sm:gap-4 ml-auto xl:ml-0 flex-shrink-0">
          <div class="hidden sm:flex items-center gap-2 rounded-lg h-10 px-3 bg-gray-100 dark:bg-gray-700">
            <span class="material-symbols-outlined text-gray-600 dark:text-gray-300">calendar_today</span>
            <span class="text-sm font-medium">Últimos 30 días</span>
            <span class="material-symbols-outlined text-gray-600 dark:text-gray-300">arrow_drop_down</span>
          </div>

          <div 
            class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10 cursor-pointer hover:ring-2 hover:ring-primary transition-all" 
            style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAymE-SWFEfdRehjLRi2yiBNuqzT1G2cqM7Eb9ram0Rus2dlG0tNNW3aPbRMkFIeK315X_ixw_MDf_PNjqlKIYMqk3lKpJCO3_Jo2Hjf8zK63nbts0rAPvYB8SHucjKAghQFPbgPkK4yTxm_2jZA3HhcK5QDDx9ah7L9RZgJqbhpQQVBkMYCpUpNvfSDu40yPVFWK2oXHwwweU_s6dbUfINJ8vPDtYGGa0rKgjhA69A7m7oIoYCLSpmWOk1wYu8q_pBSfVVH80gNIo');"
          ></div>
        </div>
      </header>

      {/* Navegación Horizontal - Solo visible en móvil/tablet */}
      <nav class="xl:hidden flex items-center gap-2 px-4 sm:px-8 py-2 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-[#1F2937] overflow-x-auto">
          <a 
            class={`flex items-center gap-2 px-3 py-2 rounded-lg whitespace-nowrap transition-colors ${
              activePage === 'dashboard' 
                ? 'bg-primary/20 text-primary dark:bg-primary/30' 
                : 'hover:bg-gray-100 dark:hover:bg-gray-700'
            }`}
            href="/"
          >
            <span class="material-symbols-outlined">dashboard</span>
            <p class="text-sm font-medium">Dashboard</p>
          </a>
          <a 
            class={`flex items-center gap-2 px-3 py-2 rounded-lg whitespace-nowrap transition-colors ${
              activePage === 'pacientes' 
                ? 'bg-primary/20 text-primary dark:bg-primary/30' 
                : 'hover:bg-gray-100 dark:hover:bg-gray-700'
            }`}
            href="/pacientes"
          >
            <span class="material-symbols-outlined">group</span>
            <p class="text-sm font-medium">Pacientes</p>
          </a>
          <a 
            class={`flex items-center gap-2 px-3 py-2 rounded-lg whitespace-nowrap transition-colors ${
              activePage === 'accesibilidad' 
                ? 'bg-primary/20 text-primary dark:bg-primary/30' 
                : 'hover:bg-gray-100 dark:hover:bg-gray-700'
            }`}
            href="/accesibilidad"
          >
            <span class="material-symbols-outlined">accessibility_new</span>
            <p class="text-sm font-medium">Accesibilidad</p>
          </a>
          <a 
            class={`flex items-center gap-2 px-3 py-2 rounded-lg whitespace-nowrap transition-colors ${
              activePage === 'prueba' 
                ? 'bg-primary/20 text-primary dark:bg-primary/30' 
                : 'hover:bg-gray-100 dark:hover:bg-gray-700'
            }`}
            href="/ejemplo-pacientes"
          >
            <span class="material-symbols-outlined">science</span>
            <p class="text-sm font-medium">Prueba</p>
          </a>
        </nav>

      {/* CONTENIDO DE LA PÁGINA */}
      <main class="flex-1 flex flex-col overflow-hidden">
        <slot />
      </main>
    </div>
  </div>
</body>
</html>
